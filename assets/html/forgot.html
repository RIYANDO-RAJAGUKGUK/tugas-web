<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="fontawesome-free-6.4.0-web/css/all.css">
    <script src="fontawesome-free-6.4.0-web/js/all.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="./assets/css/forgot.css">
    <title>Forgot Password</title>
</head>

<body>
    <div class="container">
        <div class="forms-container">
            <div class="forgot-password">
                <form action="login.html" class="forgot-password-form" onsubmit="resetPassword(event)">
                    <h2 class="title">Forgot Passowrd</h2>
                    <div class="input-field">
                        <i class="fas fa-envelope"></i>
                        <input type="text" id="email" placeholder="Masukkan Email" required/>
                    </div>
                    <input type="submit" value="Reset Password" class="reset-btn">
                    <p id="status" style="margin-top: 10px; color: green;"></p>
                </form>
            </div>
        </div>

        <div class="panels-container">
            <div class="panel left-panel">
                <div class="content">
                    <h3>New here ?</h3>
                    <p>
                        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Debitis,
                        ex ratione. Aliquid!
                    </p>
                    <button class="btn transparent" id="sign-up-btn">
                        Sign up
                    </button>
                </div>
                <img src="./assets/images/logo.png" class="image" alt="">
            </div>
            <div class="panel right-panel">
                <div class="content">
                    <h3>One of us ?</h3>
                    <p>
                        Lorem ipsum dolor sit amet consectetur adipisicing elit. Nostrum
                        laboriosam ad deleniti.
                    </p>
                    <button class="btn transparent" id="sign-in-btn">
                        Sign in
                    </button>
                </div>
                <img src="./assets/images/logo.png" class="image" alt="">
            </div>
        </div>
    </div>
    <script src="app.js"></script>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
        import { getAuth, sendPasswordResetEmail } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAeZuwDZLCh4h8J7yWJQfWi2wJPQdWc4WA",
            authDomain: "komputasi-awan-73088.firebaseapp.com",
            projectId: "komputasi-awan-73088",
            storageBucket: "komputasi-awan-73088.appspot.com",
            messagingSenderId: "999686590022",
            appId: "1:999686590022:web:07723eb57cd8dca8e2c447",
            measurementId: "G-YT195HH86L"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        window.resetPassword = function (event) {
            event.preventDefault();
            const email = document.getElementById("email").value;
            const statusEl = document.getElementById("status");

            sendPasswordResetEmail(auth, email)
            .then(() => {
                statusEl.style.color = "green";
                statusEl.textContent = "Link reset berhasil dikirim ke email.";
                setTimeout(() => {
                    window.location.href = "login.html";
                }, 2000);
            })
            .catch((error) => {
                statusEl.style.color = "red";
                statusEl.textContent = "Gagal: " + error.message;
                console.error("Error:", error);
            });
        };
        </script>


</body>

</html>